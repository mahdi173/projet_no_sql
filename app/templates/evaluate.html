<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Evaluate Model</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body class="p-4">
    <div class="container">
      <h2 class="mb-3">Evaluation du mod√®le</h2>
      {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
      {% else %}
        <p><strong>Accuracy:</strong> {{ accuracy }}</p>

        <h3>Classification report</h3>
        <table class="table table-sm table-bordered">
          <thead><tr><th>Class</th><th>Precision</th><th>Recall</th><th>F1-score</th><th>Support</th></tr></thead>
          <tbody>
          {% for cls, vals in report.items() %}
            {% if cls != 'accuracy' and cls != 'macro avg' and cls != 'weighted avg' %}
            <tr>
              <td>{{ cls }}</td>
              <td>{{ '%.3f'|format(vals['precision']) }}</td>
              <td>{{ '%.3f'|format(vals['recall']) }}</td>
              <td>{% if vals['f1-score'] is not none %}{{ '%.3f'|format(vals['f1-score']) }}{% else %}N/A{% endif %}</td>
              <td>{{ vals['support'] }}</td>
            </tr>
            {% endif %}
          {% endfor %}
          </tbody>
        </table>

        <h3>Confusion matrix</h3>
        <img src="data:image/png;base64,{{ cm_image }}" alt="confusion matrix" class="img-fluid">
      {% endif %}
    </div>
  </body>
 </html>
